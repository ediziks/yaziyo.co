{% extends "articles/article_base.html" %}
{% load static %}
{% load readtime %}
{% load social_share %}
{% load widget_tweaks %}
{% block head %}
  <!-- Primary Meta Tags -->
  <title>{{article.title}}</title>
  <meta name="title" content="{{article.title}}">
  <meta name="description" content="{{article.message|safe|truncatechars:55}}">
  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://yaziyo.co/{{article.get_absolute_url}}">
  <meta property="og:title" content="{{article.title}}">
  <meta property="og:description" content="{{article.message|safe|truncatechars:55}}">
  <meta property="og:image" content="{{article.image.url}}">
  <!-- Twitter -->
  <meta property="twitter:card" content="{{article.message|safe|truncatechars:55}}">
  <meta property="twitter:url" content="https://yaziyo.co/{{article.get_absolute_url}}">
  <meta property="twitter:title" content="{{article.title}}">
  <meta property="twitter:description" content="{{article.message|safe|truncatechars:55}}">
  <meta property="twitter:image" content="{{article.image.url}}">
{% endblock head %}
{% block content %}
{% load thumbnail %}
{% if article.image %}
<div class="article-image" id="art-img">
  <img src="{{article.image.url}}" alt="">
</div>
{% endif %}
<div class="col-md-12">
  <div class="container">
    <div class="article media">
      <div class="media-body">
        <div class="media-heading">
          <div class="user-info">
            <span class="username">
              <a href="{% url 'accounts:profile' username=article.user.username %}"><img src="{% thumbnail article.user.profile.avatar 50x50 crop %}" class="rounded-circle mr-1" width="50" height="50" alt="">@{{article.user.username}}</a>
            </span>
            <span class="float-right mt-3">
              <i class="fas fa-stopwatch"></i> {{article.message|readtime}}&nbsp;&nbsp;&nbsp;<i class="far fa-calendar-alt"></i> {{article.created_date|date:"d.m.Y"}}
            </span>
          </div>
          <div class="upper-article">
            <div class="time align-text-center">
              <h1>{{article.title}}</h1>
            </div>
          </div>
          <div class="mt-3 artmessage">
            <pre>
            {{article.message|safe}}
            </pre>
          </div>
          <div class="tags">
            {% for tag in article.tags.all %}
            <a class="mr-1 badge badge-info" href="{% url 'articles:tags' tag=tag.slug %}">#{{ tag.name|cut:'#' }}</a>
            {% endfor %}
          </div>
        </div>
        <div class="modal-footer">
          {% if user.is_authenticated and article.user == request.user %}
          <a class="ml-auto" title="sil" href="{% url 'articles:delete' username=request.user.username slug=article.slug %}"><button type="button" class="btn btn-outline-danger"><i class="fas fa-trash-alt"></i></button></a>
          {% endif %}
          {% if article in request.user.profile.bookmarks.all %}
          <a title="kaydedilenlerden çıkar" href="{% url 'articles:delete_bookmark' bookmark_slug=article.slug %}"><button type="button" class="btn btn-outline-primary"><i class="fa fa-bookmark"></i>&nbsp;<i class="fas fa-check"></i></button></a>
          {% else %}
          <a title="kaydet" href="{% url 'articles:add_bookmark' bookmark_slug=article.slug %}"><button type="button" class="btn btn-outline-primary"><i class="far fa-bookmark"></i></button></a>
          {% endif %}
          {% if request.user in article.likes.all %}
          <a title="beğeniyi geri çek" href="{{article.get_like_url}}"><button type="button" class="btn btn-outline-danger"><i class="fa fa-heart"></i> <strong>{{article.likes.count}}</strong></button></a>
          {% else %}
          <a title="beğen" href="{{article.get_like_url}}"><button type="button" class="btn btn-outline-danger"><i class="far fa-heart"></i> <strong>{{article.likes.count}}</strong></button></a>
          {% endif %}
          <div class="tw-share">
            {% post_to_twitter "Yeni yazımı buradan inceleyebilirsiniz!" object_or_url '<span class="btn btn-outline-info btn-lg fab fa-twitter">' %}
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="comments-from-article-detail">
  {% include "articles/comments.html" %}
</div>
<style>
@media only screen and (max-width: 768px) {
  .user-info {
    padding: 2.6em 1.5em !important;
  }
}

@media only screen and (max-width: 991px) {
  .dropdown-menu-lg-right {
    left: -2.8em !important;
  }
}

body,
html {
  height: 100%;
}

.artmessage img {
  max-width: 100%;
  height: auto;
}

.tags {
  display: flex;
  margin: 2em 0;
  flex-wrap: wrap;
}

.tags .badge {
  margin-bottom: 0.3em;
}

.fa-calendar-alt {
  border-left: 1px solid black;
  padding-left: 1em;
}

.username a {
  color: black;
  font-weight: 200;
}

.username a:hover {
  color: #2cc4bb;
}

.upper-article .time h1 {
  font-family: 'Roboto-Slab-500';
  margin-top: 1em;
  border-bottom: 1px solid #dee2e6 !important;
  padding-bottom: 0.6em;
  line-height: 1.35;
  letter-spacing: 0.7px;
}

h1 {
  font-size: 28pt !important;
  font-weight: 800 !important;
  border-top: 1px solid #dee2e6 !important;
  padding-top: 0.6em !important;
}

.badge-info {
  font-size: 11pt;
  padding: 0.6em 0.4em 0.6em 0.4em;
}

.artmessage {
  width: 100%
}

.artmessage * {
  font-size: 105%;
  line-height: 1.5;
  line-break: auto;
  white-space: normal !important;

}

pre {
  white-space: pre-wrap;
  color: black;
}

.user-info {
  background: #c8c8c8;
  padding: 1.3em 1.5em;
  border-radius: 10px;
}

#art-img {
  /*  padding-top: 10em;
  padding-bottom: 10em; */
  margin: 0 auto 1.3em;
  overflow: hidden;
  position: relative;
  width: 100%;
  text-align: center;
  text-align: -webkit-center;
  /* height: 100vh; */
}

#art-img img {
  max-width: 100%;
}
</style>
{% endblock content %}
{% block bottom %}
{# code syntax highlight #}
{% endblock bottom %}